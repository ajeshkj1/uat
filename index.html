<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DB Schenker - EV Launch Event | Quiz Time</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            text-align: center; 
            padding: 20px; 
            background-color: #008080; 
            color: white;
            font-size: calc(1rem + 0.5vw);
        }
        .container { 
            max-width: 400px; 
            margin: auto; 
            background: lightgrey; 
            padding: 20px; 
            border-radius: 10px; 
            color: black;
        }
        h1, h2 { color: #d40000; }
        canvas { 
            border: 1px solid #000; 
            width: 100%; 
            height: 150px; 
            background: white; 
            touch-action: none; 
        }
        .hidden { display: none; }
        .correct { background-color: lightgreen; }
        .incorrect { background-color: lightcoral; }
        button { 
            margin: 5px; 
            padding: 10px; 
            border: none; 
            cursor: pointer; 
            font-size: inherit;
        }
        .next-btn { background-color: #000; color: white; }
        #final-image {
            max-width: 100%;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <h1>DB Schenker - EV Launch Event</h1>
    <h2>Quiz Time</h2>
    <div class="container">
        <div id="question-section">
            <p id="question">Question 1:</p>
            <div id="answer-container"></div>
            <button class="next-btn" onclick="nextQuestion()">Next</button>
        </div>

        <div id="signature-section" class="hidden">
            <p>Please sign below:</p>
            <canvas id="signature-pad"></canvas>
            <button onclick="clearSignature()">Clear</button>
            <button onclick="submitSignature()">Submit</button>
        </div>

        <div id="photo-section" class="hidden">
            <p>Capture your photo:</p>
            <video id="video" autoplay></video>
            <button onclick="capturePhoto()">Capture</button>
        </div>

        <div id="bye-section" class="hidden">
            <canvas id="final-canvas" class="hidden"></canvas>
            <img id="final-image" src="" alt="Final Image">
            <p>Thank you for attending the event</p>
            <p>Capture a screenshot or show this message at the counter to collect your token of appreciation</p>
        </div>
    </div>

    <script>
        const questions = [
            { text: "Document for cross-border trucking?", options: ["Passport", "Hotel Booking", "Customs Clearance", "Tour guide"], correct: "Customs Clearance" },
            { text: "DB Schenker headquarters location?", options: ["Germany", "Singapore", "India", "China"], correct: "Germany" },
            { text: "What is the largest ocean on Earth?", options: ["Atlantic Ocean", "Indian Ocean", "Arctic Ocean", "Pacific Ocean"], correct: "Pacific Ocean" }
        ];
        let currentQuestion = 0;
        let drawing = false;
        const questionElem = document.getElementById("question");
        const answerContainer = document.getElementById("answer-container");
        const signatureCanvas = document.getElementById("signature-pad");
        const signatureCtx = signatureCanvas.getContext("2d");
        const finalCanvas = document.getElementById("final-canvas");
        const finalCtx = finalCanvas.getContext("2d");
        const video = document.getElementById("video");

        function loadQuestion() {
            if (currentQuestion < questions.length) {
                questionElem.innerText = `Question ${currentQuestion + 1}: ${questions[currentQuestion].text}`;
                answerContainer.innerHTML = "";
                questions[currentQuestion].options.forEach(option => {
                    const button = document.createElement("button");
                    button.innerText = option;
                    button.onclick = () => checkAnswer(option);
                    answerContainer.appendChild(button);
                });
            } else {
                document.getElementById("question-section").classList.add("hidden");
                document.getElementById("signature-section").classList.remove("hidden");
            }
        }

        function checkAnswer(selected) {
            answerContainer.innerHTML = "";
            questions[currentQuestion].options.forEach(option => {
                const button = document.createElement("button");
                button.innerText = option;
                button.classList.add(option === questions[currentQuestion].correct ? "correct" : "incorrect");
                answerContainer.appendChild(button);
            });
        }

        function nextQuestion() {
            currentQuestion++;
            loadQuestion();
        }

        loadQuestion();

        signatureCanvas.addEventListener("pointerdown", startDrawing);
        signatureCanvas.addEventListener("pointermove", draw);
        signatureCanvas.addEventListener("pointerup", stopDrawing);

        function startDrawing(event) {
            drawing = true;
            signatureCtx.beginPath();
            signatureCtx.moveTo(event.offsetX, event.offsetY);
            signatureCtx.strokeStyle = "red"; // Change signature color
            signatureCtx.lineWidth = 2;
        }

        function draw(event) {
            if (!drawing) return;
            signatureCtx.lineTo(event.offsetX, event.offsetY);
            signatureCtx.stroke();
        }

        function stopDrawing() {
            drawing = false;
        }

        function clearSignature() {
            signatureCtx.clearRect(0, 0, signatureCanvas.width, signatureCanvas.height);
        }

        function submitSignature() {
            document.getElementById("signature-section").classList.add("hidden");
            document.getElementById("photo-section").classList.remove("hidden");
            navigator.mediaDevices.getUserMedia({ video: true }).then(stream => {
                video.srcObject = stream;
            });
        }

        function capturePhoto() {
            finalCanvas.width = video.videoWidth;
            finalCanvas.height = video.videoHeight;
            finalCtx.drawImage(video, 0, 0, finalCanvas.width, finalCanvas.height);
            finalCtx.drawImage(signatureCanvas, finalCanvas.width - 200, finalCanvas.height - 150, 180, 100);
            finalCtx.fillStyle = "white";
            finalCtx.font = "20px Arial";
            finalCtx.fillText("Thank you for attending DB Schenker Singapore - EV Launch Event!", 10, 30);
            document.getElementById("final-image").src = finalCanvas.toDataURL("image/png");
            document.getElementById("photo-section").classList.add("hidden");
            document.getElementById("bye-section").classList.remove("hidden");
        }
    </script>
</body>
</html>
